#!/usr/bin/env bash

# Pactopus - Cross-distribution personal package management DSC tool
# Version: 0.1.1

set -euo pipefail

# Global variables
readonly PACTOPUS_VERSION="0.1.1"
readonly SCRIPT_NAME=$(basename "$0")

# Print version information
version() {
    echo "pactopus version ${PACTOPUS_VERSION}"
}

# Print help information
help() {
    cat << EOF
Pactopus - Cross-distribution personal package management DSC tool

Usage: ${SCRIPT_NAME} [COMMAND] <OPTIONS> arguments

Commands:
    version    Display the version information
    help       Display this help message

Options:
    -h, --help    Display help information

Examples:
    ${SCRIPT_NAME} version
    ${SCRIPT_NAME} help

EOF
}

# Main entry point
main() {
    # Handle no arguments
    if [[ $# -eq 0 ]]; then
        help
        exit 0
    fi

    # Parse command
    local command="${1:-}"
    shift || true

    case "${command}" in
        version)
            version
            ;;
        help|-h|--help)
            help
            ;;
        *)
            echo "Error: Unknown command '${command}'" >&2
            echo "Run '${SCRIPT_NAME} help' for usage information." >&2
            exit 1
            ;;
    esac
}

# Run main function
main "$@"